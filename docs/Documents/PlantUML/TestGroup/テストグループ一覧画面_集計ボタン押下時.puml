@startuml テストグループ一覧_集計ボタン押下時
scale max 3000 height
title 集計ボタン押下時シーケンス図

actor "ログインユーザ" as User
participant "テストグループ一覧画面" as Screen
participant "テスト集計結果表示画面" as SummaryScreen

User -> Screen: 集計ボタン押下
activate Screen

Screen -> SummaryScreen: /testGroup/{groupId}/testSummaryResult\nへ遷移\n(IDをパス変数に保存)
activate SummaryScreen

SummaryScreen -> SummaryScreen: getServerSession()で認証確認
alt 未認証
    SummaryScreen --> User: Unauthorized エラー発生
else 認証済み
    SummaryScreen -> SummaryScreen: APIでテスト集計結果データを取得
    alt 取得成功
        SummaryScreen --> User: テスト集計結果表示画面を表示
    else 403 Forbidden (権限なし)
        SummaryScreen -> SummaryScreen: 403 Forbidden スロー
        SummaryScreen --> User: 403 エラー画面表示
    else 500 Internal Server Error
        SummaryScreen -> SummaryScreen: 500 エラースロー
        SummaryScreen --> User: 500 エラー画面表示
    end
end

deactivate SummaryScreen
deactivate Screen
@enduml
