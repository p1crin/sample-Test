@startuml テストケース一覧画面
autonumber
actor "ログインユーザー" as User
participant "画面\n(/test-groups/[groupId]/cases)" as Screen
participant "API\n(/api/test-groups/[groupId]/cases)" as API

User -> Screen: 画面アクセス
activate Screen
Screen -> Screen: useSession()で認証確認
alt 未認証
    Screen -> User: /loginにリダイレクト
else 認証済み
    Screen -> API: GET /api/test-groups/[groupId]/cases
    activate API
    API -> API: JWTトークン検証
    API -> API: アクセス権限確認\n(canViewTestCases)
    alt 権限あり
        API -> API: SELECT tc.* FROM tt_test_cases tc\nWHERE tc.test_group_id = $1\nAND tc.is_deleted = FALSE\nORDER BY tc.tid
        API -> Screen: 200 OK\n{ testCases: [...] }
        deactivate API
        Screen -> User: テストケース一覧表示
    else 権限なし
        API -> Screen: 403 Forbidden
        deactivate API
        Screen -> User: エラー表示
    end
end
deactivate Screen
@enduml