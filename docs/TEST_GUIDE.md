# ãƒ†ã‚¹ãƒˆå®Ÿæ–½ã‚¬ã‚¤ãƒ‰

ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã§ã¯ã€testcasedb ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒ†ã‚¹ãƒˆå®Ÿè¡Œæ–¹æ³•ã¨ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã®èª¬æ˜ã«ã¤ã„ã¦è¨˜è¼‰ã—ã¾ã™ã€‚

## ç›®æ¬¡

1. [ãƒ†ã‚¹ãƒˆç’°å¢ƒã®æ¦‚è¦](#ãƒ†ã‚¹ãƒˆç’°å¢ƒã®æ¦‚è¦)
2. [ãƒ†ã‚¹ãƒˆå®Ÿè¡Œæ–¹æ³•](#ãƒ†ã‚¹ãƒˆå®Ÿè¡Œæ–¹æ³•)
3. [ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ä¸€è¦§](#ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ä¸€è¦§)
4. [ãƒ†ã‚¹ãƒˆæ§‹é€ ](#ãƒ†ã‚¹ãƒˆæ§‹é€ )
5. [ã‚«ã‚¹ã‚¿ãƒ ãƒ†ã‚¹ãƒˆã®ä½œæˆ](#ã‚«ã‚¹ã‚¿ãƒ ãƒ†ã‚¹ãƒˆã®ä½œæˆ)
6. [ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°](#ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°)
7. [CI/CD çµ±åˆ](#cicd-çµ±åˆ)

> **é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ:** [TEST_BEST_PRACTICES.md](./TEST_BEST_PRACTICES.md) â† ãƒ†ã‚¹ãƒˆã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã‚’å‚ç…§ã—ã¦ãã ã•ã„

---

## ãƒ†ã‚¹ãƒˆç’°å¢ƒã®æ¦‚è¦

### ä½¿ç”¨æŠ€è¡“

| ãƒ„ãƒ¼ãƒ« | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | å½¹å‰² |
|--------|-----------|------|
| **Vitest** | v3.2.0 | ãƒ†ã‚¹ãƒˆãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ |
| **React Testing Library** | v16.3.0 | React ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãƒ†ã‚¹ãƒˆ |
| **@testing-library/user-event** | v14.6.1 | ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ |
| **jsdom** | v26.1.0 | DOM ç’°å¢ƒ |
| **@testing-library/jest-dom** | v6.6.3 | ã‚«ã‚¹ã‚¿ãƒ ãƒãƒƒãƒãƒ£ãƒ¼ |

### ãƒ†ã‚¹ãƒˆã®ç¨®é¡

- **ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ**: å€‹åˆ¥ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã€é–¢æ•°ã®å‹•ä½œç¢ºèª
- **çµ±åˆãƒ†ã‚¹ãƒˆ**: è¤‡æ•°ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆé–“ã®é€£æºç¢ºèª
- **UI ãƒ†ã‚¹ãƒˆ**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³ã®æ¤œè¨¼

---

## ãƒ†ã‚¹ãƒˆå®Ÿè¡Œæ–¹æ³•

### 1. å…¨ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ

ã™ã¹ã¦ã®ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚

```bash
npm test
```

**å‡ºåŠ›ä¾‹:**
```
 âœ“ tests/app/login/_components/LoginFormContainer.test.tsx (14)
 âœ“ tests/app/(secure)/testGroup/_components/TestGroupListContainer.test.tsx (28)

Test Files  2 passed (2)
     Tests  42 passed (42)
```

### 2. ç‰¹å®šã®ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’å®Ÿè¡Œ

```bash
# ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢ãƒ†ã‚¹ãƒˆã®ã¿
npm test LoginFormContainer.test.tsx

# ãƒ†ã‚¹ãƒˆã‚°ãƒ«ãƒ¼ãƒ—ä¸€è¦§ç”»é¢ãƒ†ã‚¹ãƒˆã®ã¿
npm test TestGroupListContainer.test.tsx
```

### 3. ç‰¹å®šã®ãƒ†ã‚¹ãƒˆã‚¹ã‚¤ãƒ¼ãƒˆã‚’å®Ÿè¡Œ

```bash
# describeå†…ã®ç‰¹å®šã®ãƒ†ã‚¹ãƒˆã®ã¿å®Ÿè¡Œ
npm test -- -t "ãƒ­ã‚°ã‚¤ãƒ³å‡¦ç†"
```

### 4. ã‚¦ã‚©ãƒƒãƒãƒ¢ãƒ¼ãƒ‰

ãƒ•ã‚¡ã‚¤ãƒ«ã®å¤‰æ›´ã‚’ç›£è¦–ã—ã¦è‡ªå‹•çš„ã«ãƒ†ã‚¹ãƒˆã‚’å†å®Ÿè¡Œã—ã¾ã™ã€‚

```bash
# ã‚¦ã‚©ãƒƒãƒãƒ¢ãƒ¼ãƒ‰ï¼ˆãƒ¡ãƒ¢ãƒªåŠ¹ç‡çš„ã§æ¨å¥¨ï¼‰
npm run test:watch

# ã¾ãŸã¯
npm test -- --watch
```

> **ãƒ’ãƒ³ãƒˆ:** ã‚¦ã‚©ãƒƒãƒãƒ¢ãƒ¼ãƒ‰ã¯ãƒ¡ãƒ¢ãƒªãƒªãƒ¼ã‚¯ãŒå°‘ãªã„ãŸã‚ã€ãƒ¡ãƒ¢ãƒªä¸è¶³ã‚¨ãƒ©ãƒ¼ãŒå‡ºãŸå ´åˆã¯æ¨å¥¨ã§ã™ã€‚

### 5. UI ãƒ¢ãƒ¼ãƒ‰ï¼ˆãƒ–ãƒ©ã‚¦ã‚¶ãƒ™ãƒ¼ã‚¹ï¼‰

ãƒ–ãƒ©ã‚¦ã‚¶ã®UIã§ãƒ†ã‚¹ãƒˆçµæœã‚’ç¢ºèªã§ãã¾ã™ã€‚

```bash
npm run test:ui
```

ãƒ–ãƒ©ã‚¦ã‚¶ãŒè‡ªå‹•ã§é–‹ãã€`http://localhost:51204/__vitest__/` ã§ãƒ†ã‚¹ãƒˆçµæœã‚’ç¢ºèªã§ãã¾ã™ã€‚

**UI ãƒ¢ãƒ¼ãƒ‰ã®æ©Ÿèƒ½:**
- ãƒ†ã‚¹ãƒˆçµæœã®è¦–è¦šçš„è¡¨ç¤º
- ãƒ•ã‚¡ã‚¤ãƒ«æ¤œç´¢
- ãƒ†ã‚¹ãƒˆã®ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
- è©³ç´°ãªã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤º

### 6. ã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ¬ãƒãƒ¼ãƒˆ

ãƒ†ã‚¹ãƒˆãŒã‚«ãƒãƒ¼ã—ã¦ã„ã‚‹ã‚³ãƒ¼ãƒ‰ã®å‰²åˆã‚’ç¢ºèªã—ã¾ã™ã€‚

```bash
npm test -- --coverage
```

**å‡ºåŠ›ä¾‹:**
```
 File                                      | % Stmts | % Lines | % Funcs | % Uncovered Line #s
 All files                                 |   85.2  |   82.1  |   90.5  |
  app/login/_components/LoginFormContainer |   92.3  |   89.5  |   95.0  |
  app/(secure)/testGroup/_components/...   |   78.1  |   75.3  |   85.0  |
```

> **ãƒ¡ãƒ¢:** ã‚«ãƒãƒ¬ãƒƒã‚¸å®Ÿè¡Œã¯ãƒ¡ãƒ¢ãƒªã‚’å¤šãæ¶ˆè²»ã™ã‚‹ãŸã‚ã€ãƒ¡ãƒ¢ãƒªä¸è¶³ã‚¨ãƒ©ãƒ¼ãŒå‡ºãŸå ´åˆã¯ [Q8](#q8-fatal-error) ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

### 7. ç‰¹å®šã®ãƒ†ã‚¹ãƒˆã‚’é™¤å¤–

```bash
# ç‰¹å®šã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¹ã‚­ãƒƒãƒ—
npm test -- --exclude "**/*.skip.test.ts"
```

### 8. ãƒ‡ãƒãƒƒã‚°ãƒ¢ãƒ¼ãƒ‰

```bash
# è©³ç´°ãƒ­ã‚°å‡ºåŠ›
npm test -- --reporter=verbose
```

---

## ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ä¸€è¦§

### ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢ãƒ†ã‚¹ãƒˆ

ğŸ“„ **ãƒ•ã‚¡ã‚¤ãƒ«:** `tests/app/login/_components/LoginFormContainer.test.tsx`

**ãƒ†ã‚¹ãƒˆã‚¹ã‚¤ãƒ¼ãƒˆæ•°:** 6
**ãƒ†ã‚¹ãƒˆä»¶æ•°:** 14

#### ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ï¼ˆ2ä»¶ï¼‰
- âœ… `æœªèªè¨¼æ™‚ã«ãƒ­ã‚°ã‚¤ãƒ³ãƒ•ã‚©ãƒ¼ãƒ ã‚’è¡¨ç¤ºã™ã‚‹`
  - ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹å…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰
  - ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰
  - ãƒ­ã‚°ã‚¤ãƒ³ãƒœã‚¿ãƒ³

- âœ… `èª­è¾¼ä¸­çŠ¶æ…‹ã§ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ç”»é¢ã‚’è¡¨ç¤ºã™ã‚‹`
  - ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¡¨ç¤º
  - "ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’èª­ã¿è¾¼ã¿ä¸­..." ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸

#### ãƒ­ã‚°ã‚¤ãƒ³å‡¦ç†ï¼ˆ5ä»¶ï¼‰
- âœ… `æ­£ã—ã„ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã¨ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã§ãƒ­ã‚°ã‚¤ãƒ³ã§ãã‚‹`
  - signIn é–¢æ•°å‘¼ã³å‡ºã—ç¢ºèª
  - æ­£ã—ã„ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿æ¤œè¨¼

- âœ… `ä¸æ­£ãªãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã§ãƒ­ã‚°ã‚¤ãƒ³ã‚’å¤±æ•—ã•ã›ã‚‹`
  - ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤º
  - ãƒ­ã‚°ã‚¤ãƒ³ API ã®å¤±æ•—å‡¦ç†

- âœ… `ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒç©ºã®å ´åˆã¯ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼ã‚’è¡¨ç¤ºã™ã‚‹`
  - ãƒ•ã‚©ãƒ¼ãƒ æ¤œè¨¼ã‚¨ãƒ©ãƒ¼
  - ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¸ã®ã‚¨ãƒ©ãƒ¼è¡¨ç¤º

- âœ… `ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ãŒç©ºã®å ´åˆã¯ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼ã‚’è¡¨ç¤ºã™ã‚‹`
  - å¿…é ˆãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰æ¤œè¨¼

- âœ… `ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ©ãƒ¼æ™‚ã«ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤ºã™ã‚‹`
  - API ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
  - ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤º

#### ãƒ•ã‚©ãƒ¼ãƒ å…¥åŠ›ï¼ˆ3ä»¶ï¼‰
- âœ… `ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹å…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«å…¥åŠ›ã§ãã‚‹`
  - ãƒ†ã‚­ã‚¹ãƒˆå…¥åŠ›ç¢ºèª

- âœ… `ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«å…¥åŠ›ã§ãã‚‹`
  - ãƒ†ã‚­ã‚¹ãƒˆå…¥åŠ›ç¢ºèª

- âœ… `ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã¯type="password"ã§ã‚ã‚‹`
  - ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å±æ€§ç¢ºèª

#### ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹å½¢å¼ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆ1ä»¶ï¼‰
- âœ… `ä¸æ­£ãªãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹å½¢å¼ã§ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼ã‚’è¡¨ç¤ºã™ã‚‹`
  - Zod ã‚¹ã‚­ãƒ¼ãƒæ¤œè¨¼

---

### ãƒ†ã‚¹ãƒˆã‚°ãƒ«ãƒ¼ãƒ—ä¸€è¦§ç”»é¢ãƒ†ã‚¹ãƒˆ

ğŸ“„ **ãƒ•ã‚¡ã‚¤ãƒ«:** `tests/app/(secure)/testGroup/_components/TestGroupListContainer.test.tsx`

**ãƒ†ã‚¹ãƒˆã‚¹ã‚¤ãƒ¼ãƒˆæ•°:** 10
**ãƒ†ã‚¹ãƒˆä»¶æ•°:** 28

#### ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ï¼ˆ3ä»¶ï¼‰
- âœ… `ãƒ†ã‚¹ãƒˆã‚°ãƒ«ãƒ¼ãƒ—ä¸€è¦§ã‚’è¡¨ç¤ºã™ã‚‹`
  - API ã‹ã‚‰å–å¾—ã—ãŸãƒ‡ãƒ¼ã‚¿è¡¨ç¤º

- âœ… `æ¤œç´¢ãƒ•ã‚©ãƒ¼ãƒ ã‚’è¡¨ç¤ºã™ã‚‹`
  - OEM æ¤œç´¢ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰
  - æ©Ÿç¨®æ¤œç´¢ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰
  - ã‚¤ãƒ™ãƒ³ãƒˆæ¤œç´¢ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰

- âœ… `ã€Œãƒ†ã‚¹ãƒˆã‚°ãƒ«ãƒ¼ãƒ—æ–°è¦ç™»éŒ²ã€ãƒœã‚¿ãƒ³ã‚’è¡¨ç¤ºã™ã‚‹`
  - æ–°è¦ç™»éŒ²ãƒœã‚¿ãƒ³ã®è¡¨ç¤ºç¢ºèª

#### æ¤œç´¢æ©Ÿèƒ½ï¼ˆ4ä»¶ï¼‰
- âœ… `OEM ã§æ¤œç´¢ã§ãã‚‹`
  - API ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿æ¤œè¨¼

- âœ… `æ©Ÿç¨®ã§æ¤œç´¢ã§ãã‚‹`
  - å‹•çš„ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°

- âœ… `è¤‡æ•°æ¡ä»¶ã§æ¤œç´¢ã§ãã‚‹`
  - AND æ¤œç´¢å‡¦ç†

- âœ… `ç©ºã®æ¤œç´¢æ¡ä»¶ã‚’ã‚¹ã‚­ãƒƒãƒ—ã™ã‚‹`
  - URL ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®ã‚¯ãƒªãƒ¼ãƒ‹ãƒ³ã‚°

#### ãƒ‡ãƒ¼ã‚¿å–å¾—ï¼ˆ4ä»¶ï¼‰
- âœ… `åˆæœŸè¡¨ç¤ºæ™‚ã« API ã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã™ã‚‹`
  - è‡ªå‹•ãƒ‡ãƒ¼ã‚¿å–å¾—

- âœ… `API ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãŸå ´åˆã¯ç©ºã®ãƒªã‚¹ãƒˆã‚’è¡¨ç¤ºã™ã‚‹`
  - ã‚°ãƒ¬ãƒ¼ã‚¹ãƒ•ãƒ«ãƒ‡ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³

- âœ… `ä¸æ­£ãª API å¿œç­”ã‚’å‡¦ç†ã™ã‚‹`
  - ãƒ¬ã‚¹ãƒãƒ³ã‚¹æ¤œè¨¼

- âœ… `ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³æƒ…å ±ã‚’è¨ˆç®—ã™ã‚‹`
  - ãƒšãƒ¼ã‚¸ã‚«ã‚¦ãƒ³ãƒˆè¨ˆç®—

#### ã‚½ãƒ¼ãƒˆæ©Ÿèƒ½ï¼ˆ1ä»¶ï¼‰
- âœ… `ID ã§ã‚½ãƒ¼ãƒˆå¯èƒ½`
  - åˆ—åˆ¥ã‚½ãƒ¼ãƒˆç¢ºèª

#### å‰Šé™¤æ©Ÿèƒ½ï¼ˆ1ä»¶ï¼‰
- âœ… `å‰Šé™¤ç¢ºèªãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’è¡¨ç¤ºã™ã‚‹`
  - UI ãƒ¢ãƒ¼ãƒ€ãƒ«ç¢ºèª

#### ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆ2ä»¶ï¼‰
- âœ… `ãƒ†ã‚¹ãƒˆã‚°ãƒ«ãƒ¼ãƒ—ID ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ç”»é¢ã«é·ç§»ã™ã‚‹`
  - ç”»é¢é·ç§»ç¢ºèª
  - URL ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿æ¤œè¨¼

- âœ… `æ–°è¦ç™»éŒ²ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ãƒ†ã‚¹ãƒˆã‚°ãƒ«ãƒ¼ãƒ—ç™»éŒ²ç”»é¢ã«é·ç§»ã™ã‚‹`
  - ãƒªãƒ³ã‚¯ç¢ºèª

#### ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆ2ä»¶ï¼‰
- âœ… `ãƒšãƒ¼ã‚¸ã‚’å¤‰æ›´ã§ãã‚‹`
  - ãƒšãƒ¼ã‚¸åˆ‡ã‚Šæ›¿ãˆç¢ºèª

- âœ… `URL ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ã¨åŒæœŸã™ã‚‹`
  - çŠ¶æ…‹ç®¡ç†ç¢ºèª

#### ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ï¼ˆ3ä»¶ï¼‰
- âœ… `ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ©ãƒ¼ã‚’å‡¦ç†ã™ã‚‹`
  - Connection Error ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

- âœ… `API ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚¨ãƒ©ãƒ¼ã‚’å‡¦ç†ã™ã‚‹`
  - HTTP 500 ã‚¨ãƒ©ãƒ¼å‡¦ç†

- âœ… `èªè¨¼ã‚¨ãƒ©ãƒ¼ï¼ˆ401ï¼‰ã‚’å‡¦ç†ã™ã‚‹`
  - Unauthorized ã‚¨ãƒ©ãƒ¼å‡¦ç†

#### ã‚¢ã‚¯ã‚·ãƒ§ãƒ³æ©Ÿèƒ½ï¼ˆ3ä»¶ï¼‰
- âœ… `ç·¨é›†ãƒœã‚¿ãƒ³ãŒè¡¨ç¤ºã•ã‚Œã‚‹`
  - å„è¡Œã«ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒœã‚¿ãƒ³è¡¨ç¤º

- âœ… `é›†è¨ˆãƒœã‚¿ãƒ³ãŒè¡¨ç¤ºã•ã‚Œã‚‹`
  - é›†è¨ˆæ©Ÿèƒ½ãƒœã‚¿ãƒ³ç¢ºèª

- âœ… `è¤‡è£½ãƒœã‚¿ãƒ³ãŒè¡¨ç¤ºã•ã‚Œã‚‹`
  - è¤‡è£½æ©Ÿèƒ½ãƒœã‚¿ãƒ³ç¢ºèª

---

## ãƒ†ã‚¹ãƒˆæ§‹é€ 

### ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ

```
testcasedb/
â”œâ”€â”€ tests/
â”‚   â”œâ”€â”€ setup.ts                                    # ãƒ†ã‚¹ãƒˆç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ login/
â”‚   â”‚   â”‚   â””â”€â”€ _components/
â”‚   â”‚   â”‚       â”œâ”€â”€ login.test.tsx                  # æ—¢å­˜ãƒ†ã‚¹ãƒˆ
â”‚   â”‚   â”‚       â””â”€â”€ LoginFormContainer.test.tsx     # æ–°è¦ãƒ†ã‚¹ãƒˆï¼ˆ14ä»¶ï¼‰
â”‚   â”‚   â””â”€â”€ (secure)/
â”‚   â”‚       â””â”€â”€ testGroup/
â”‚   â”‚           â””â”€â”€ _components/
â”‚   â”‚               â””â”€â”€ TestGroupListContainer.test.tsx  # æ–°è¦ãƒ†ã‚¹ãƒˆï¼ˆ28ä»¶ï¼‰
â”‚   â””â”€â”€ ...
â”œâ”€â”€ vitest.config.ts                                # Vitest è¨­å®š
â”œâ”€â”€ package.json
â””â”€â”€ docs/
    â””â”€â”€ TEST_GUIDE.md                               # ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
```

### ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã®å‘½åè¦å‰‡

```
[ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå].test.tsx
```

**ä¾‹:**
- `LoginFormContainer.test.tsx`
- `TestGroupListContainer.test.tsx`

### ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã®æ§‹é€ 

```typescript
describe('ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå', () => {
  describe('æ©Ÿèƒ½ã‚°ãƒ«ãƒ¼ãƒ—', () => {
    it('ä½•ã‚’ãƒ†ã‚¹ãƒˆã™ã‚‹ã‹', () => {
      // 1. arrange (æº–å‚™)
      // 2. act (å®Ÿè¡Œ)
      // 3. assert (æ¤œè¨¼)
    });
  });
});
```

---

## ã‚«ã‚¹ã‚¿ãƒ ãƒ†ã‚¹ãƒˆã®ä½œæˆ

### ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ

```typescript
import { render, screen, waitFor } from '@testing-library/react';
import userEvent from '@testing-library/user-event';
import '@testing-library/jest-dom';
import { Provider } from 'react-redux';
import { store } from '@/stores/store';
import { YourComponent } from '@/path/to/YourComponent';
import { vi } from 'vitest';
import React from 'react';

// ãƒ¢ãƒƒã‚¯ã®è¨­å®š
vi.mock('next/navigation', () => ({
  useRouter: () => ({
    push: vi.fn(),
  }),
  useSearchParams: () => ({
    get: vi.fn(),
  }),
}));

describe('YourComponent', () => {
  beforeEach(() => {
    vi.clearAllMocks();
  });

  it('should render correctly', () => {
    render(
      <Provider store={store}>
        <YourComponent />
      </Provider>
    );
    expect(screen.getByText('Expected text')).toBeInTheDocument();
  });

  it('should handle user interaction', async () => {
    const user = userEvent.setup();
    render(
      <Provider store={store}>
        <YourComponent />
      </Provider>
    );

    await user.click(screen.getByRole('button'));

    await waitFor(() => {
      expect(screen.getByText('Updated text')).toBeInTheDocument();
    });
  });
});
```

### ãƒ†ã‚¹ãƒˆãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

#### 1. ãƒ†ã‚¹ãƒˆãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆ

```typescript
import { render, screen, waitFor } from '@testing-library/react';
import userEvent from '@testing-library/user-event';
import { vi } from 'vitest';
```

#### 2. Redux Store ã‚’ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã§ä¾›çµ¦

```typescript
render(
  <Provider store={store}>
    <YourComponent />
  </Provider>
);
```

#### 3. ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¤ãƒ™ãƒ³ãƒˆã®ä½¿ç”¨

```typescript
const user = userEvent.setup();
await user.type(input, 'text');
await user.click(button);
```

#### 4. éåŒæœŸå‡¦ç†ã®å¾…æ©Ÿ

```typescript
await waitFor(() => {
  expect(screen.getByText('Loaded')).toBeInTheDocument();
});
```

#### 5. ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ã‚¯ã‚¨ãƒªã®å„ªå…ˆé †

1. **getByRole** - ãƒœã‚¿ãƒ³ã€å…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãªã©
   ```typescript
   screen.getByRole('button', { name: 'Submit' })
   ```

2. **getByLabelText** - ãƒ•ã‚©ãƒ¼ãƒ ãƒ©ãƒ™ãƒ«
   ```typescript
   screen.getByLabelText('Email')
   ```

3. **getByPlaceholderText** - ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼
   ```typescript
   screen.getByPlaceholderText('Enter email')
   ```

4. **getByText** - ãƒ†ã‚­ã‚¹ãƒˆå†…å®¹
   ```typescript
   screen.getByText('Welcome')
   ```

5. **getByTestId** - data-testid å±æ€§
   ```typescript
   screen.getByTestId('custom-element')
   ```

---

## ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### Q1: ãƒ†ã‚¹ãƒˆãŒã€ŒCannot find moduleã€ã‚¨ãƒ©ãƒ¼ã§å¤±æ•—ã™ã‚‹

**åŸå› :** ãƒ‘ã‚¹ã‚¨ã‚¤ãƒªã‚¢ã‚¹ãŒæ­£ã—ãè¨­å®šã•ã‚Œã¦ã„ãªã„

**è§£æ±ºæ–¹æ³•:**

1. `vitest.config.ts` ã§ã‚¨ã‚¤ãƒªã‚¢ã‚¹ã‚’ç¢ºèª
   ```typescript
   resolve: {
     alias: {
       '@': path.resolve(__dirname, './'),
     },
   }
   ```

2. `tsconfig.json` ã‚‚åŒã˜ãç¢ºèª
   ```json
   {
     "compilerOptions": {
       "baseUrl": ".",
       "paths": {
         "@/*": ["./*"]
       }
     }
   }
   ```

### Q2: ã€ŒReferenceError: window is not definedã€

**åŸå› :** ã‚µãƒ¼ãƒãƒ¼å´ã®ã‚³ãƒ¼ãƒ‰ãŒãƒ†ã‚¹ãƒˆç’°å¢ƒã§å®Ÿè¡Œã•ã‚Œã¦ã„ã‚‹

**è§£æ±ºæ–¹æ³•:**

```typescript
if (typeof window !== 'undefined') {
  // ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´ã®å‡¦ç†
}
```

ã¾ãŸã¯

```typescript
vi.mock('next/navigation', () => ({
  useRouter: () => ({
    push: vi.fn(),
  }),
}));
```

### Q3: ã€ŒCannot read property 'push' of undefinedã€ï¼ˆuseRouterï¼‰

**åŸå› :** `useRouter` ãŒãƒ¢ãƒƒã‚¯ã•ã‚Œã¦ã„ãªã„

**è§£æ±ºæ–¹æ³•:** `setup.ts` ã¾ãŸã¯å„ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã§æ¬¡-authã¨next/navigationã‚’ãƒ¢ãƒƒã‚¯

```typescript
vi.mock('next/navigation', () => ({
  useRouter: () => ({
    push: vi.fn(),
    refresh: vi.fn(),
    back: vi.fn(),
  }),
}));
```

### Q4: ãƒ†ã‚¹ãƒˆãŒã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã™ã‚‹

**åŸå› :** éåŒæœŸå‡¦ç†ã®å®Œäº†ã‚’å¾…ã£ã¦ã„ãªã„

**è§£æ±ºæ–¹æ³•:**

```typescript
// âŒ æ‚ªã„ä¾‹
render(<Component />);
screen.getByText('Loaded');

// âœ… è‰¯ã„ä¾‹
render(<Component />);
await waitFor(() => {
  screen.getByText('Loaded');
});
```

### Q5: ã€Œactã€è­¦å‘ŠãŒå‡ºã‚‹

**åŸå› :** çŠ¶æ…‹æ›´æ–°ãŒ `act()` ã§ãƒ©ãƒƒãƒ—ã•ã‚Œã¦ã„ãªã„

**è§£æ±ºæ–¹æ³•:**

```typescript
// âœ… userEvent ä½¿ç”¨æ™‚ã¯è‡ªå‹•çš„ã« act() ã§ãƒ©ãƒƒãƒ—ã•ã‚Œã‚‹
const user = userEvent.setup();
await user.click(button);

// âœ… waitFor ã‚‚è‡ªå‹•çš„ã« act() ã§ãƒ©ãƒƒãƒ—ã•ã‚Œã‚‹
await waitFor(() => {
  expect(element).toBeInTheDocument();
});
```

### Q6: ãƒ¢ãƒƒã‚¯ãŒæ©Ÿèƒ½ã—ã¦ã„ãªã„

**åŸå› :** ãƒ¢ãƒƒã‚¯å®šç¾©ã®é †åºãŒé–“é•ã£ã¦ã„ã‚‹

**è§£æ±ºæ–¹æ³•:**

```typescript
// âœ… ã‚¤ãƒ³ãƒãƒ¼ãƒˆã®å‰ã«ãƒ¢ãƒƒã‚¯å®šç¾©
vi.mock('next/navigation', () => ({...}));

// ãã®å¾Œã«ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
import { useRouter } from 'next/navigation';
```

### Q7: CSS import ã‚¨ãƒ©ãƒ¼

**åŸå› :** CSS ãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆãŒãƒ†ã‚¹ãƒˆç’°å¢ƒã§å¤±æ•—

**è§£æ±ºæ–¹æ³•:** `setup.ts` ã§ CSS ã‚’ãƒ¢ãƒƒã‚¯

```typescript
vi.mock('@/app/globals.css', () => ({}));
vi.mock('react-day-picker/dist/style.css', () => ({}));
```

### Q8: ã€ŒFATAL ERROR: Ineffective mark-compacts near heap limit Allocation failed - JavaScript heap out of memoryã€

**åŸå› :** ãƒ†ã‚¹ãƒˆãŒå¤§é‡ã®ãƒ¡ãƒ¢ãƒªã‚’æ¶ˆè²»ã—ã¦ã„ã‚‹ã€ã¾ãŸã¯ Node.js ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ¡ãƒ¢ãƒªåˆ¶é™ãŒä¸è¶³

**è§£æ±ºæ–¹æ³•:**

1. **Node.js ãƒ¡ãƒ¢ãƒªåˆ¶é™ã‚’å¢—ã‚„ã™** ï¼ˆæ¨å¥¨ï¼‰
   ```bash
   # å˜å›å®Ÿè¡Œ
   NODE_OPTIONS=--max-old-space-size=4096 npm test

   # ã¾ãŸã¯
   npm test  # package.json ã§è¨­å®šæ¸ˆã¿
   ```

2. **ãƒ†ã‚¹ãƒˆã‚¹ãƒ¬ãƒƒãƒ‰æ•°ã‚’æ¸›ã‚‰ã™**
   ```typescript
   // vitest.config.ts
   export default defineConfig({
     test: {
       threads: true,
       maxThreads: 2,  # ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‹ã‚‰ 2 ã«åˆ¶é™
       minThreads: 1,
     },
   });
   ```

3. **å€‹åˆ¥ã®ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’å®Ÿè¡Œ**
   ```bash
   # 1ã¤ã®ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã®ã¿å®Ÿè¡Œ
   npm test LoginFormContainer.test.tsx
   npm test TestGroupListContainer.test.tsx
   ```

4. **ã‚¦ã‚©ãƒƒãƒãƒ¢ãƒ¼ãƒ‰ã§åˆ†å‰²å®Ÿè¡Œ**
   ```bash
   # ã‚¦ã‚©ãƒƒãƒãƒ¢ãƒ¼ãƒ‰ï¼ˆãƒ¡ãƒ¢ãƒªãƒªãƒ¼ã‚¯ãªã—ï¼‰
   npm run test:watch
   ```

**ç¾åœ¨ã®è¨­å®š:**
- `maxThreads: 2` ã«è¨­å®šæ¸ˆã¿
- `NODE_OPTIONS='--max-old-space-size=4096'` ã‚’è¨­å®šæ¸ˆã¿

---

## CI/CD çµ±åˆ

### GitHub Actions ã§ã® ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ

`.github/workflows/test.yml` ã®ä¾‹ï¼š

```yaml
name: Tests

on: [push, pull_request]

jobs:
  test:
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v3

      - uses: actions/setup-node@v3
        with:
          node-version: '18'

      - run: npm install

      - run: npm test

      - run: npm test -- --coverage

      - uses: codecov/codecov-action@v3
        with:
          files: ./coverage/coverage-final.json
```

### GitLab CI ã§ã® ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ

`.gitlab-ci.yml` ã®ä¾‹ï¼š

```yaml
test:
  image: node:18
  script:
    - npm install
    - npm test
    - npm test -- --coverage
  coverage: '/Coverage: \d+\.\d+%/'
```

---

## ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–

### ãƒ†ã‚¹ãƒˆå®Ÿè¡Œæ™‚é–“ã®çŸ­ç¸®

1. **ä¸¦åˆ—å®Ÿè¡Œã®æœ‰åŠ¹åŒ–ã¨ ãƒ¡ãƒ¢ãƒªæœ€é©åŒ–**
   ```typescript
   // vitest.config.ts
   export default defineConfig({
     test: {
       threads: true,
       maxThreads: 2,  // ãƒ¡ãƒ¢ãƒªåŠ¹ç‡ã‚’è€ƒæ…®ã—ã¦ 2 ã«è¨­å®š
       minThreads: 1,
     },
   });
   ```

   **ãƒ¡ãƒ¢ãƒªåˆ¶é™ã‚’è¨­å®šã—ãŸ npm ã‚¹ã‚¯ãƒªãƒ—ãƒˆ:**
   ```json
   {
     "scripts": {
       "test": "cross-env NODE_OPTIONS='--max-old-space-size=4096' vitest run",
       "test:watch": "cross-env NODE_OPTIONS='--max-old-space-size=4096' vitest"
     }
   }
   ```

2. **ä¸è¦ãªãƒ¢ãƒƒã‚¯ã®å‰Šé™¤**
   ```typescript
   // å®Ÿéš›ã«å¿…è¦ãªãƒ¢ãƒƒã‚¯ã®ã¿ã‚’å®šç¾©
   vi.mock('module', () => ({
     // æœ€å°é™ã®å®Ÿè£…
   }));
   ```

3. **ãƒ†ã‚¹ãƒˆã®ç²’åº¦èª¿æ•´**
   - å¤§ããªçµ±åˆãƒ†ã‚¹ãƒˆã¯é¿ã‘ã‚‹
   - å°ã•ãªãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆã‚’çµ„ã¿åˆã‚ã›ã‚‹

---

## ãã®ä»–ã®å‚è€ƒãƒªã‚½ãƒ¼ã‚¹

- [Vitest å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://vitest.dev/)
- [React Testing Library](https://testing-library.com/react)
- [Testing Library ã‚¯ã‚¨ãƒª](https://testing-library.com/docs/queries/about)
- [@testing-library/user-event](https://testing-library.com/user-event)

---

## ã‚ˆãã‚ã‚‹è³ªå•ï¼ˆFAQï¼‰

**Q: ãªãœ Vitest ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ã®ã‹ï¼Ÿ**
A: æ¬¡ã®ã‚ˆã†ãªåˆ©ç‚¹ãŒã‚ã‚Šã¾ã™ï¼š
- Vite ãƒ™ãƒ¼ã‚¹ã§é«˜é€Ÿ
- Jest äº’æ› API
- esm ã‚µãƒãƒ¼ãƒˆ
- Next.js ã¨ã®çµ±åˆãŒå®¹æ˜“

**Q: ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸ã®ç›®æ¨™ã¯ï¼Ÿ**
A: æ¨å¥¨å€¤ã¯ 80% ä»¥ä¸Šã§ã™ï¼š
- Statements: 80%ä»¥ä¸Š
- Branches: 75%ä»¥ä¸Š
- Functions: 80%ä»¥ä¸Š
- Lines: 80%ä»¥ä¸Š

**Q: E2E ãƒ†ã‚¹ãƒˆã¯å¿…è¦ã‹ï¼Ÿ**
A: æœ¬ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯ãƒ¦ãƒ‹ãƒƒãƒˆ/çµ±åˆãƒ†ã‚¹ãƒˆä¸­å¿ƒã§ã™ã€‚
E2E ãƒ†ã‚¹ãƒˆï¼ˆPlaywrightã€Cypressï¼‰ã¯ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¦æ¨¡ã«å¿œã˜ã¦æ¤œè¨ã—ã¦ãã ã•ã„ã€‚

**Q: ãƒ†ã‚¹ãƒˆé§†å‹•é–‹ç™ºï¼ˆTDDï¼‰ã‚’æ¨å¥¨ã™ã‚‹ã‹ï¼Ÿ**
A: ã¯ã„ã€æ¨å¥¨ã—ã¾ã™ã€‚ãƒ†ã‚¹ãƒˆã‚’å…ˆã«æ›¸ãã“ã¨ã§ï¼š
- è¨­è¨ˆãŒæ˜ç¢ºã«ãªã‚‹
- ãƒã‚°ãŒæ—©æœŸã«æ¤œå‡ºã•ã‚Œã‚‹
- ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ãŒå®‰å…¨
